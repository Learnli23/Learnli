{% extends 'base.html' %} 
{% block content %}
<html>
            <card class="c">
                {% if section.section_image %}
                <h3>{{ section.title }}</h3>
                <img src="{{section.section_image.url }}" width="200" height="200" class="d-inline-block align-text-top" alt=" "> 
                {% endif %}
                
            </card>
            
            
            <style>
                .container {
                    display: flex;
                }
                .toc {
                    width: 20%;
                    padding-right: 20px;
                }
                .content {
                    width: 100%;
                }
            </style>
                <script>
                    function showSection(sectionId) {
                        var sections = document.querySelectorAll('.section');
                        sections.forEach(function(section) {
                            section.style.display = 'none';
                        });
                        document.getElementById(sectionId).style.display = 'block';
                    }
                </script>
            
                
                <div class="container" style="display:flex ;">
                    
                    <div class="toc">
                        <h5>subsections</h5>
                    {% if sub_sections %}
                        <ul>
                            {% for sub_section in sub_sections %}
                        
                                <li><a href="javascript:void(0);" onclick="showSection('section-{{ sub_section.id }}')">{{ sub_section.title }}</a></li>
                            {% if forloop.last %} 
                                {% if request.user ==  sub_section.subsection_author %}
                                <button class="btn btn-outline-success" style="border:black ;text-align:left;"><a href="{% url 'add_sub_section' section.pk %}"><strong style="color:darkred ;">+subsection</strong></a></button> 
                                {% endif %}  
                            {% endif %}  
                
                            {% endfor %}
                
                    {% else %}       
                        
                    <button class="btn btn-outline-success" style="border:black ;"><a href="{% url 'add_sub_section' section.pk %}"><strong style="color:darkred ;">Add subsection</strong></a></button> 
                    <br/>
                    </ul>
                    {% endif %}  
                        
                    </div>
 
                    <div class="content" style="display:flex ;border-right-style:double;border-bottom-style:double;border-left-style:double;border-top-style:double;background-color:burlywood;">
                        <!-- Toolbar for Icons -->
                        <div class="toolbar" >
                            <button id="translateBtn" title="Translate">
                                <i class="fa fa-language"></i>
                            </button>
                            <button id="themeToggleBtn" title="Change Theme">
                                <i class="fa fa-adjust"></i>
                            </button>
                            <button id="readAloudBtn" title="Read Aloud">
                                <i class="fa fa-volume-up"></i>
                            </button>
                        <button id="fontTypeBtn" title="Change Font Type">
                     <i class="fa fa-font"></i>
                        </button>
                   <button id="fontSizeBtn" title="Change Font Size">
                       <i class="fa fa-text-height"></i>
                     </button>
                        </div>
                       
                        {% for sub_section in sub_sections %}
                        
                            <div id="section-{{ sub_section.id }}" class="section" style="display: none;">
                                
                                <h5 style="text-align: center;">{{ sub_section.title }}</h5>
                                {% if sub_section.section_image %}
                                <img src="{{sub_section.section_image.url }}" width="800" height="300" class="d-inline-block align-text-top" alt=" ">
                            {% endif %}
                                <br/><br/>
                                {%  if sub_section.section_video %}
                            <card>
                               
                                <div class="video-card">
                                <video width="800" height="300" controls>
                                    <source src=" {{sub_section.section_video.url }}" type="video/mp4"></source>
                                    Your browser does not support the video tag.
                                </video>
                                </div>
                                {% endif %}

                                <card class=" ">
                                    {%  if sub_section.section_video %}
                                    <button class="btn btn-outline-secondary" style="border:black;">
                                        <a href=" {{sub_section.section_video}} " download>Download video </a>
                                    </button>
                                    
                                    <button class="btn btn-outline-success" style="border:black;">
                                        <a href=" {{sub_section.section_video}} ">new window</a>
                                    </button>
                                    {% endif %}

                                    <div id="content" class="content-area">
                                        <p>{{ sub_section.content|safe }}</p> 
                                        <a href=" ">back to top</a>
                                    </div>
                    
                                </card>

                                
                            </card>
                                
                            </div>
                            {% endfor  %}
                            <!--display content-->
            
                        
                    </div>
                </div>


                
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        if (sections.length > 0) {
                            showSection('section-' + sections[0].id);
                        }
                    });
                </script>
</html>  


 <style>
 

.toolbar {
    position:absolute;
    
    gap: 10px;
}

button {
    background-color:#000000;
    border: none;
    padding: 7px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

button:hover {
    background-color:darkred;
}

button i {
    font-size: 20px;
}

 

.dark-theme {
    background-color: #121212;
    color: #f0f0f0;
}

.page.light-theme {
    background-color: #ffffff;
    color: #000000;
}
</style>



<script>
    // ebook_content.js
    
    // Selectors
    const translateBtn = document.getElementById('translateBtn');
    const themeToggleBtn = document.getElementById('themeToggleBtn');
    const readAloudBtn = document.getElementById('readAloudBtn');
    const content = document.getElementById('ebookContent');
    
    // Global variables for themes
    let currentTheme = 'light';
    
    // Function to translate text using an external translation API (e.g., Google Translate API)
    translateBtn.addEventListener('click', () => {
        // Example translation using Google Translate API
        // Note: You need to implement server-side handling for API requests or use a third-party service.
        alert('Translation feature triggered. Implement API integration here.');
    });
    
    // Function to toggle between dark and light themes
    themeToggleBtn.addEventListener('click', () => {
        if (currentTheme === 'light') {
            document.body.classList.add('dark-theme');
            document.body.classList.remove('light-theme');
            currentTheme = 'dark';
        } else {
            document.body.classList.add('light-theme');
            document.body.classList.remove('dark-theme');
            currentTheme = 'light';
        }
    });
    
    // Function to read aloud the content using Web Speech API
    readAloudBtn.addEventListener('click', () => {
        const speech = new SpeechSynthesisUtterance(content.innerText);
        speech.lang = 'en-US'; // Set language based on user preference or detect automatically
        window.speechSynthesis.speak(speech);
    });
    </script>

<script>

           // Web Safe Fonts and Google Fonts List
const fonts = [
    'Arial', 'Verdana', 'Helvetica', 'Georgia', 'Times New Roman', 'Courier New',
    'Trebuchet MS', 'Lucida Console', 'Comic Sans MS', 'Impact', 
    'Roboto', 'Open Sans', 'Lato', 'Montserrat', 'Oswald', 'Raleway' // Add more Google Fonts as desired
];

// Font Type Functionality
document.getElementById('fontTypeBtn').addEventListener('click', function () {
    // Create a dropdown to select font
    const selectFont = document.createElement('select');
    selectFont.id = 'fontSelector';

    // Populate dropdown with font options
    fonts.forEach(font => {
        const option = document.createElement('option');
        option.value = font;
        option.style.fontFamily = font; // Display the font in its style
        option.textContent = font;
        selectFont.appendChild(option);
    });

    // Show the dropdown and apply the selected font
    selectFont.addEventListener('change', function () {
        document.getElementById('content').style.fontFamily = this.value;
    });

    // Append the dropdown to the toolbar temporarily
    document.querySelector('.toolbar').appendChild(selectFont);

    // Remove the dropdown after selection or click outside
    document.addEventListener('click', (event) => {
        if (!selectFont.contains(event.target) && event.target !== document.getElementById('fontTypeBtn')) {
            selectFont.remove();
        }
    });
});

// Font Size Functionality
document.getElementById('fontSizeBtn').addEventListener('click', function () {
    const selectedSize = prompt('Enter font size (e.g., 12px, 14px, 16px):', '14px');

    if (selectedSize.match(/^\d+px$/)) {
        document.getElementById('content').style.fontSize = selectedSize;
    } else {
        alert('Invalid font size. Please enter a valid size in pixels, e.g., 14px.');
    }
});


</script>

 
 
    
{% endblock %}
