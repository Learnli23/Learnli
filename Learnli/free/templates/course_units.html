{% extends 'base.html' %}


{% block content %}
 <!-------------------------->
 
    <!-- Heading and Filter Section -->
    <div class="course-header">
        <h1 style="font-size:medium;">LearnLi Open Hands Cours units</h1>
        <p>Toggle list view mode to see more  details</p>
        <div class="filters">
            <input type="text" id="searchBar" onkeyup="filterCourses()" placeholder="Search field...">
             

            <div class="view-toggle">
                <button onclick="toggleView('grid')" class="toggle-btn active"><i class="fas fa-th"></i> Grid</button>
                <button onclick="toggleView('list')" class="toggle-btn"><i class="fas fa-list"></i> List</button>
            </div>
        </div>
    </div>

    <!-- Course Listing Section -->
   
    <div class="course-container grid-view" id="courseContainer">
     
      {% for course_unit in course_units %}
      {% if course_unit.unit_teacher ==  request.user %}
        <!-- Sample Course Card -->
        
        <div class="course-card" data-title="Course Title" data-creator="Creator Name" data-language="English" data-field="Science">
          <a href="" class="course-title">{{subject.title}}</a>
          <div class="course-image">
              <a  href=""><img src="{{course_units.image.url }}"> </a>
            </div>
            <div class="course-details">
              <a href="{% url 'profile' course_units.unit_teacher.id %} " style="font-size: small;">Created by:{{ course_units.unit_taecher }}</a>
                <p class="course-date">Uploaded on:{{ course_unit.created_on }}</p>
                <button class="btn btn-outline-primary" name="Enroll" value="unEnroll" type="submit"><a href="{% url 'course_unit_lessons' course_unit.id %}">lessons</a></button>
         
                {% if request.user == course_units.unit_teacher %}
                        
                <button class="btn btn-outline-secondary"><a href=" {% url 'edit_course_unit' course_unit.id %}"><strong 
                style="color:black;">Edit</strong></a>
                </button>
                <button class="btn btn-outline-danger"><a href=" {% url 'delete_course_unit' course_unit.id %}"><strong 
                  style="color:black;">delete</strong></a>
                  </button>
                {% endif %}
                <button class="description-btn" onclick="toggleDescription(this)">View Description</button>
                <div class="course-description">
                    <p>{{course_unit.description | safe}}</p>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
        <!-- More course cards here... -->
    </div>


    <script>
        // Toggle between grid and list views
        function toggleView(view) {
            const courseContainer = document.getElementById('courseContainer');
            const buttons = document.querySelectorAll('.toggle-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            if (view === 'grid') {
                courseContainer.classList.add('grid-view');
                courseContainer.classList.remove('list-view');
                document.querySelector('.toggle-btn:nth-child(1)').classList.add('active');
            } else {
                courseContainer.classList.add('list-view');
                courseContainer.classList.remove('grid-view');
                document.querySelector('.toggle-btn:nth-child(2)').classList.add('active');
            }
        }

        // Filter courses by search query and dropdowns
        function filterCourses() {
            const query = document.getElementById('searchBar').value.toLowerCase();
            const field = document.getElementById('fieldFilter').value.toLowerCase();
            const language = document.getElementById('languageFilter').value.toLowerCase();
            const courses = document.querySelectorAll('.course-card');
            courses.forEach(course => {
                const title = course.dataset.title.toLowerCase();
                const creator = course.dataset.creator.toLowerCase();
                const courseField = course.dataset.field.toLowerCase();
                const courseLanguage = course.dataset.language.toLowerCase();
                if ((title.includes(query) || creator.includes(query)) &&
                    (field === '' || courseField.includes(field)) &&
                    (language === '' || courseLanguage.includes(language))) {
                    course.style.display = '';
                } else {
                    course.style.display = 'none';
                }
            });
        }

        // Toggle description display without expanding card dimensions
        function toggleDescription(button) {
            const description = button.nextElementSibling;
            description.classList.toggle('show');
            button.textContent = description.classList.contains('show') ? "Hide Description" : "View Description";
        }
    </script>
 




{% endblock %}
