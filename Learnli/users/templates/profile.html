{% extends 'base.html' %}

{% block content %}

 
{% if profile %}

<!---USER PROFILE-->
        <div class="card mb-3" style="max-width: 540px;">

          <div  class="card mb-3" style="max-width: 540px; background-color:black;"> 
            <p style="color:blue; padding: 15px;">{{profile.username}}'s profile</p>
          </div>

            <div class="row g-0">
              <div class="col-md-4">
               
                <img src="{{ profile.profile_image.url }}"class="img-fluid rounded-start" alt="profile image">
              </div>
              <div class="col-md-8">
                <div class="card-body"> 
                  <h5 class="card-title" style="color: darkblue;">{{profile.username}}</h5>
                  <p class="card-text" style="color:crimson ;">profile:<a style="text-decoration:none ;" href="{% url 'profile' user.id %}">{{profile.username}}</a></p>
                  <p class="card-text" style="color:crimson ;">email:<a style="text-decoration:none ;"  href="">{{profile.email}}</a></p>
                  <p class="card-text" style="color:crimson ;">name:<a style="text-decoration:none ;" href="">{{profile.last_name}}</a></p>
                  <div style="margin: 24px 0;">
                    <a href="#"><i class="fa fa-twitter"></i></a>  
                    <a href="#"><i class="fa fa-linkedin"></i></a>  
                    <a href="#"><i class="fa fa-facebook"></i></a>
                  </div>
                  {% if profile.is_institution %}
                  <p class="card-text" style="color:crimson ;">website:<a href="">{{profile.website}}</a></p>
                  {% endif %}
                 
                  <br/>
                  <p class="card-text"><small class="text-muted"> Last updated: {{ profile.date_modified }}</small></p>
                </div>
              </div>
            </div>
            <button>

              <button class="btn btn-outline-primary"><a href="{% url 'profile_library' profile.id %}">
                <strong style="color:darkred ;">{{profile}}'s Library</strong></a>
                </button>
                {% if profile.is_teacher or profile.is_institution %}
                <button class="btn btn-outline-secondary"><a href="{% url 'profile_books' profile.id %}">
                  <strong style="color:blue ;">{{profile}}'s eLibrary</strong></a>
                  </button>
                {% endif %} 

            </button>
 
          </div>
          
          


          
          <!--form to follow or unfollow and updating profiles-->
          
          <form  method="post">
            {% csrf_token %}
            {% if profile in user.follows.all  %} 

            <button class="btn btn-outline-danger" name="follow" value="unfollow" type="submit">unfollow<strong 
              style="color:blue ;">{{profile.username}}</strong>

            </button>
            {% else %}
            <button class="btn btn-outline-success" name="follow" value="follow" type="submit">follow <strong 
              style="color:blue ;">{{profile.username}}</strong>
            </button>
        
            {% endif %}
            <!--updated profile-->
            {% if request.user.id == profile.id %}
            <button class="btn btn-outline-secondary" name="Update user"><a style="text-decoration:none ;" href="{% url 'update_profile' %}">Update profile</a></button>
             {% endif %}
          </button>


         </form>

         <!--  the followers profiles-->
         <strong data-bs-toggle="collapse" data-bs-target="#followers" style="color:darkblue; font-size: smaller;"> followers <strong style="color:brown ;">{{profile.followed_by.all.count}}</strong></strong>
        
         <div class="col-4">
            <div id="followers" class="collapse hide">
              
                <div class="card">
          
                {% for followed in profile.followed_by.all %}

                <div class="card mb-3" style="max-width: 540px;">
                  <div class="row g-0">
                    <div class="col-md-4">
                     
                      <img src="{{ followed.profile_image.url }}"class="img-fluid rounded-start" alt="profile image">
                    </div>
                    <div class="col-md-8">
                      <div class="card-body"> 
                        <h5 class="card-title" style="color:darkblue;">{{followed}}</h5>
                        <p class="card-text" style="color:crimson ;">profile:<a style="text-decoration:none ;" href="{% url 'profile'  followed.id%}">{{followed}}</a></p>
                        <p class="card-text" style="color:crimson ;">email:<a href="">{{followed.email}}</a></p>
                       
                        <div style="margin: 24px 0;">
                          <a href="#"><i class="fa fa-twitter"></i></a>  
                          <a href="#"><i class="fa fa-linkedin"></i></a>  
                          <a href="#"><i class="fa fa-facebook"></i></a>
                        </div>
                       
                        {% if followed.is_institution %}
                         <p class="card-text" style="color:crimson ;">website:<a href="">{{followed.website}}</a></p>
                        {% endif %}
                        <br/>
                        <p class="card-text"><small class="text-muted"> Last updated: {{followed.date_modified }}</small></p>
                      </div>
                    </div>
                  </div>
                </div> 
                
                {% endfor %}
          
              </div>
 
            </div>

         <!--  the following profiles-->
         <strong data-bs-toggle="collapse" data-bs-target="#following" style="color:darkblue;font-size: smaller"> following <strong style="color:brown ;">{{profile.follows.all.count}}</strong></strong>
      
            <div id="following" class="collapse hide">
                <div class="card">
                     

                    {% for following in profile.follows.all %}

                    <div class="card mb-3" style="max-width: 540px;">
                      <div class="row g-0">
                        <div class="col-md-4">
                         
                          <img src="{{ following.profile_image.url }}"class="img-fluid rounded-start" alt="profile image">
                        </div>
                        <div class="col-md-8">
                          <div class="card-body"> 
                            <h5 class="card-title" style="color:crimson ;">{{following}}</h5>
                            <p class="card-text" style="color:crimson ;">profile:<a style="text-decoration:none ;" href="{%url 'profile'  following.id%}">{{following}}</a></p>
                            <p class="card-text" style="color:crimson ;">email:<a style="text-decoration:none ;" href="">{{following.email}}</a></p>
                          
                            <div style="margin: 24px 0;">
                              <a href="#"><i class="fa fa-twitter"></i></a>  
                              <a href="#"><i class="fa fa-linkedin"></i></a>  
                              <a href="#"><i class="fa fa-facebook"></i></a>
                            </div>
                          
                            {% if following.is_institution %}
                            <p class="card-text" style="color:crimson ;">website:<a href="">{{following.website}}</a></p>
                            {% endif %}  
                            <br/>
                            <p class="card-text"><small class="text-muted"> Last updated: {{following.date_modified }}</small></p>
                            <br/>
                          </div>
                        </div>
                      </div>
                    </div>

                    {% endfor %}

                
                </div>
              </div>
                <br/>
             
                <br/>
              <br/>
            </div>

  
                {% endif %}


{% endblock %}